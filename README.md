# Mini-CRM

–ú–∏–Ω–∏-CRM –¥–ª—è —Å–±–æ—Ä–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ —Å —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç.

![Laravel](https://img.shields.io/badge/Laravel-12-red)
![PHP](https://img.shields.io/badge/PHP-8.4-blue)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP 8.2+
- Composer
- SQLite / MySQL

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd mini-crm

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
php artisan key:generate

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
touch database/database.sqlite
php artisan migrate:fresh --seed

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
php artisan serve
```

### Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
docker-compose up -d
```

## üìã –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `php artisan db:seed` –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

| Email | –ü–∞—Ä–æ–ª—å | –†–æ–ª—å |
|-------|--------|------|
| admin@example.com | password | admin |
| manager@example.com | password | manager |

–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞—é—Ç—Å—è 10 –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å 1-3 –∑–∞—è–≤–∫–∞–º–∏ –∫–∞–∂–¥—ã–π.

## üîó –ú–∞—Ä—à—Ä—É—Ç—ã

### –ü—É–±–ª–∏—á–Ω—ã–µ

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/widget` | –í–∏–¥–∂–µ—Ç —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ |
| POST | `/api/tickets` | API —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ |

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/login` | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ |
| GET | `/admin/tickets` | –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ |
| GET | `/admin/tickets/{id}` | –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ |
| PATCH | `/admin/tickets/{id}/status` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ |
| GET | `/api/tickets/statistics` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—è–≤–æ–∫ |

## üì¶ API

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏

```bash
curl -X POST http://localhost:8000/api/tickets \
  -H "Content-Type: application/json" \
  -H "Accept: application/json" \
  -d '{
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "phone": "+79991234567",
    "email": "ivan@example.com",
    "subject": "–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è",
    "text": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞",
  "data": {
    "id": 1,
    "subject": "–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è",
    "status": "new",
    "status_label": "–ù–æ–≤—ã–π",
    "created_at": "2025-12-08T13:45:00+00:00"
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```bash
curl http://localhost:8000/api/tickets/statistics \
  -H "Accept: application/json" \
  -b "laravel_session=<session_cookie>"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "day": 5,
    "week": 23,
    "month": 87,
    "total": 156
  }
}
```

## üé® –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞

–í—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ –≤–∞—à —Å–∞–π—Ç:

```html
<iframe 
  src="https://your-domain.com/widget" 
  width="100%" 
  height="700" 
  frameborder="0">
</iframe>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
php artisan test
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ Contracts/           # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ Enums/               # Enum –∫–ª–∞—Å—Å—ã (TicketStatus)
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/       # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Api/         # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Auth/        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Requests/        # Form Requests —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ Resources/       # API Resources
‚îú‚îÄ‚îÄ Models/              # Eloquent –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ Repositories/        # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îî‚îÄ‚îÄ Services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Laravel 12** - PHP —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **spatie/laravel-permission** - –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞
- **spatie/laravel-medialibrary** - –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- **SQLite** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## üìù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ E.164
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 –∑–∞—è–≤–∫–∞ –≤ —Å—É—Ç–∫–∏ —Å –æ–¥–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ 10 –ú–ë
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –ø–æ –¥–∞—Ç–µ, —Å—Ç–∞—Ç—É—Å—É, email, —Ç–µ–ª–µ—Ñ–æ–Ω—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞—è–≤–∫–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
